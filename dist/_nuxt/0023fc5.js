(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{280:function(e,t,o){"use strict";o(72);var r=o(8),n=o(1),c=(o(73),o(274)),l=o.n(c);n.a.use(l.a),t.a={data:function(){return{}},mounted:function(){gapi.signin2.render("google-signin-btn",{onsuccess:this.onSignIn})},methods:{isVerify:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$cookies.isKey("token")){t.next=16;break}return t.prev=1,t.next=4,e.$axios.$post("/api/auth/verify",{},{headers:{token:e.$cookies.get("token")}});case 4:t.sent.result&&(e.token.verify=!0),t.next=14;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),alert(t.t0.response.data.message),e.logout(),e.token.verify=!1;case 14:t.next=17;break;case 16:e.token.verify=!1;case 17:case"end":return t.stop()}}),t,null,[[1,8]])})))()},logout:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$post("/api/auth/logout",{},{headers:{token:e.$cookies.get("token")}});case 3:e.googleSignOut(),e.kakaoSignOut(),e.$cookies.remove("token"),e.$cookies.remove("user"),window.location.href="/",t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},googleSignOut:function(){gapi.auth2.getAuthInstance().signOut().then((function(){}))},kakaoSignOut:function(){window.Kakao.init("f8173b3459bbb7bbaf86bf7cf15df728"),Kakao.Auth.getAccessToken()?Kakao.Auth.logout((function(){console.log(Kakao.Auth.getAccessToken())})):console.log("kakao oauth has not logged in.")}}}},470:function(e,t,o){e.exports=o.p+"img/logo-img.fd72df0.png"},471:function(e,t,o){e.exports=o.p+"img/auth-banner-min.5bf96c9.jpeg"},494:function(e,t,o){e.exports=o.p+"img/logo-kakao-long.fdf836c.png"},495:function(e,t,o){"use strict";o(44),o(45),o(27),o(466);var r=o(24),n=(o(72),o(8)),c=o(1),l=(o(73),o(274)),d=o.n(l);c.a.use(d.a),t.a={data:function(){return{redirectUri:{dev:{login:"http://localhost:3000/auth",register:"http://localhost:3000/auth/register"},deploy:{login:"https://www.wehobby.kr/auth",register:"https://www.wehobby.kr/auth/register"},envNow:""}}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n,c,l,d,f,m,k,h,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.envNow="production",null==e.$route.query.code){t.next=26;break}for(t.prev=2,e.formDisplay=!1,window.Kakao.init("f8173b3459bbb7bbaf86bf7cf15df728"),o="","auth"==e.$route.name?o="development"===e.envNow?e.redirectUri.dev.login:e.redirectUri.deploy.login:"auth-register"==e.$route.name&&(o="development"===e.envNow?e.redirectUri.dev.register:e.redirectUri.deploy.register),n={grant_type:"authorization_code",client_id:"8b57101aea076db519cf1d2e77e54a30",redirect_uri:o,code:e.$route.query.code,client_secret:"l25wcjyHChkjNsuSVFxMKPqh4svBMeuD"},c="https://kauth.kakao.com/oauth/token?",l=0,d=Object.entries(n);l<d.length;l++)f=Object(r.a)(d[l],2),m=f[0],k=f[1],c+="".concat(m,"=").concat(k,"&");return c=c.slice(0,-1),t.next=13,e.$axios.$post(c,{},{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}});case 13:return h=t.sent,console.log(h),Kakao.Auth.setAccessToken(h.access_token),v=Kakao.API.request({url:"/v2/user/me"}),t.next=19,v;case 19:"auth"==e.$route.name?(e.form={id:v._result.id,pw:v._result.id},e.loginSend()):"auth-register"==e.$route.name&&(e.form={nickname:v._result.kakao_account.profile.nickname,id:v._result.id,pw:v._result.id,pwc:v._result.id,email:v._result.kakao_account.email,name:v._result.kakao_account.profile.nickname,oauth:"kakao",check:!0},e.registerSend()),console.log(e.form),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(2),console.log(t.t0);case 26:case"end":return t.stop()}}),t,null,[[2,23]])})))()},methods:{googleLogin:function(){document.getElementsByClassName("abcRioButton")[0].click()},googleRegister:function(){document.getElementsByClassName("abcRioButton")[0].click()},kakaoLogin:function(){window.Kakao.init("f8173b3459bbb7bbaf86bf7cf15df728"),Kakao.Auth.authorize({redirectUri:"development"===this.envNow?this.redirectUri.dev.login:this.redirectUri.deploy.login})},kakaoRegister:function(){window.Kakao.init("f8173b3459bbb7bbaf86bf7cf15df728"),Kakao.Auth.authorize({redirectUri:"development"===this.envNow?this.redirectUri.dev.reigster:this.redirectUri.deploy.register})}}}},550:function(e,t,o){var content=o(649);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(62).default)("342c148a",content,!0,{sourceMap:!1})},648:function(e,t,o){"use strict";o(550)},649:function(e,t,o){var r=o(61),n=o(190),c=o(471);t=r(!1);var l=n(c);t.push([e.i,".back[data-v-48236687]{width:100%;height:100%;top:0;left:0;background-image:url("+l+");background-size:cover;background-position:50%;filter:brightness(70%)}#form[data-v-48236687],.back[data-v-48236687]{position:absolute}#form[data-v-48236687]{width:400px;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:5px solid hsla(0,0%,100%,.219);border-radius:25px;padding:40px 30px;text-align:center;top:35%;left:50%;margin:-200px auto 0 -200px}#form h1[data-v-48236687]{font-size:40px}#form .sub[data-v-48236687]{margin:0 0 20px!important;font-size:16px;color:#fff}#form button[data-v-48236687]{width:100%;margin-top:10px;font-size:15px;font-weight:700}#form button.submit[data-v-48236687]{background-color:#ff4e54!important}#form p.link-to-register[data-v-48236687]{color:#fff;text-decoration:underline;margin-top:20px}#form .sub[data-v-48236687]{margin-bottom:23px}.forms[data-v-48236687]{margin-bottom:10px}.input-form[data-v-48236687]{margin-bottom:5px!important}#form .form-agree[data-v-48236687]{position:relative;display:flex}#form .form-agree .check[data-v-48236687]{width:20px;background-color:grey}#form .form-agree p[data-v-48236687]{width:100%;height:20px;position:relative;top:7px;text-align:left;color:#fff}.w-btn[data-v-48236687]{display:block;width:100%;background-color:#f5f5f5;padding:10px;border-radius:28px;margin-top:10px;font-weight:500;cursor:pointer;transition:.2s;transition-timing-function:ease}.w-btn[data-v-48236687]:hover{background-color:#e6e6e6}.w-btn .logo-social[data-v-48236687]{width:25px;margin-bottom:-7px;margin-right:5px}.btn-kakao .logo-social[data-v-48236687]{width:50px;margin-bottom:-3px}#form button.submit[data-v-48236687]{margin-top:20px}",""]),e.exports=t},723:function(e,t,o){"use strict";o.r(t);o(27),o(72);var r=o(8),n=o(1),c=(o(73),o(445),o(280)),l=o(495),d=o(274),f=o.n(d);n.a.use(f.a);var m={mixins:[c.a,l.a],data:function(){return{form:{nickname:null,id:null,pw:null,pwc:null,email:null,check:!1,name:null,oauth:null},formDisplay:!1,list:null,sendLoading:!1}},mounted:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{onSignIn:function(e){console.log(e);var t=e.nt;this.form={nickname:t.Re,id:t.uT,pw:t.uT,pwc:t.uT,email:t.Yt,name:t.Re,oauth:"google",check:!0},console.log(this.form),this.registerSend()},registerSend:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,1==e.form.check){t.next=4;break}throw alert("개인정보 처리방침 및 이용약관에 동의해주세요."),{};case 4:return e.sendLoading=!0,t.next=7,e.$axios.$post("/api/auth/register",{email:e.form.email,nickname:e.form.nickname,id:e.form.id,pw:e.form.pw,pwc:e.form.pwc,name:e.form.name,oauth:e.form.oauth});case 7:return o=t.sent,e.token=o.data.token,e.$cookies.isKey("token")?(e.$cookies.remove("token"),e.$cookies.set("token",e.token,"30d")):e.$cookies.set("token",e.token,"30d"),t.next=12,e.$axios.$post("/api/profile/read",{},{headers:{token:e.$cookies.get("token")}});case 12:r=t.sent,n={key:parseInt(r.data.key),nickname:r.data.nickname,image:r.data.imgRepre},e.$cookies.isKey("user")?(e.$cookies.remove("user"),e.$cookies.set("user",n,"30d")):e.$cookies.set("user",n,"30d"),window.location.href="/",t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),e.sendLoading=!1,alert(t.t0.response.data.message);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))()}}},k=(o(648),o(63)),h=o(127),v=o.n(h),x=o(517),w=o(713),_=o(454),component=Object(k.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"back"}),e._v(" "),r("div",{attrs:{id:"form"}},[r("img",{staticStyle:{width:"200px"},attrs:{src:o(470)}}),e._v(" "),r("p",{staticClass:"sub"},[e._v("인연과 취미를 만나는 공간")]),e._v(" "),r("div",{staticClass:"forms"},[e.formDisplay?r("v-text-field",{staticClass:"input-form",attrs:{placeholder:"닉네임","hide-details":"",solo:"",flat:""},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}}):r("v-text-field",{staticClass:"input-form",attrs:{placeholder:"닉네임","hide-details":"",solo:"",flat:""}}),e._v(" "),e.formDisplay?r("v-text-field",{staticClass:"input-form",attrs:{placeholder:"아이디","hide-details":"",solo:"",flat:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}):r("v-text-field",{staticClass:"input-form",attrs:{placeholder:"아이디","hide-details":"",solo:"",flat:""}}),e._v(" "),e.formDisplay?r("v-text-field",{staticClass:"input-form",attrs:{placeholder:"비밀번호","hide-details":"",solo:"",flat:""},model:{value:e.form.pw,callback:function(t){e.$set(e.form,"pw",t)},expression:"form.pw"}}):r("v-text-field",{staticClass:"input-form",attrs:{placeholder:"비밀번호","hide-details":"",solo:"",flat:""}}),e._v(" "),e.formDisplay?r("v-text-field",{staticClass:"input-form",attrs:{placeholder:"비밀번호 확인","hide-details":"",solo:"",flat:""},model:{value:e.form.pwc,callback:function(t){e.$set(e.form,"pwc",t)},expression:"form.pwc"}}):r("v-text-field",{staticClass:"input-form",attrs:{placeholder:"비밀번호 확인","hide-details":"",solo:"",flat:""}}),e._v(" "),e.formDisplay?r("v-text-field",{staticClass:"input-form",attrs:{placeholder:"이메일","hide-details":"",solo:"",flat:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}):r("v-text-field",{staticClass:"input-form",attrs:{placeholder:"이메일","hide-details":"",solo:"",flat:""}})],1),e._v(" "),r("div",{staticClass:"form-agree"},[r("v-checkbox",{model:{value:e.form.check,callback:function(t){e.$set(e.form,"check",t)},expression:"form.check"}}),e._v(" "),r("p",[r("nuxt-link",{staticClass:"highlight",attrs:{to:"/notice/personal-information-policy",target:"_blank"}},[e._v("개인정보 처리방침")]),e._v(" 및\n          "),r("nuxt-link",{staticClass:"highlight",attrs:{to:"/notice/term-and-conditions",target:"_blank"}},[e._v("이용약관")]),e._v("를 숙지했으며 이에 동의합니다\n        ")],1)],1),e._v(" "),r("v-btn",{staticClass:"submit",attrs:{depressed:"",rounded:"",large:"",dark:"",loading:e.sendLoading},on:{click:function(t){return e.registerSend()}}},[e._v("\n        계정 생성\n      ")]),e._v(" "),r("div",{staticClass:"w-btn btn-kakao",on:{click:function(t){return e.kakaoRegister()}}},[r("img",{staticClass:"logo-social",attrs:{src:o(494)}}),e._v("\n        카카오계정으로 시작하기\n      ")])],1)])}),[],!1,null,"48236687",null);t.default=component.exports;v()(component,{VBtn:x.a,VCheckbox:w.a,VTextField:_.a})}}]);